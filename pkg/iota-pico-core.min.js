!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@iota-pico/core",[],t):"object"==typeof exports?exports["@iota-pico/core"]=t():r.IotaPicoCore=t()}("undefined"!=typeof self?self:this,function(){return function(r){var t={};function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=r,e.c=t,e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:n})},e.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,t){if(1&t&&(r=e(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var o in r)e.d(n,o,function(t){return r[t]}.bind(null,o));return n},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},e.p="",e(e.s=10)}([function(r,t){Object.defineProperty(t,"__esModule",{value:!0});class e{static isString(r){return null!=r&&"[object String]"===Object.prototype.toString.call(r)}static isEmpty(r){return!e.isString(r)||0===r.length}static isASCII(r){return null!=r&&/^[\x00-\x7F]*$/.test(r)}static encodeNonASCII(r){return e.isString(r)?r.replace(/[\u0080-\uFFFF]/g,r=>`\\u${`0000${r.charCodeAt(0).toString(16)}`.substr(-4)}`):void 0}static decodeNonASCII(r){return e.isString(r)?r.replace(/\\u([\d\w]{4})/gi,(r,t)=>String.fromCharCode(parseInt(t,16))):void 0}}t.StringHelper=e},function(r,t){Object.defineProperty(t,"__esModule",{value:!0});class e{static isEmpty(r){return null==r}static isObject(r){return null!=r&&("object"==typeof r&&!Array.isArray(r))}static isType(r,t){const n=e.getClassName(r);return void 0!==n&&n===e.getClassName(t)}static getClassName(r){if(null!=r){const t=("function"==typeof r?r.toString():r.constructor.toString()).match(/\w+/g);return t&&t.length>1?t[1]:void 0}}}t.ObjectHelper=e},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(4),o=e(0);t.CoreError=class extends Error{constructor(r,t,e){super(r),this.additional=t||{},this.innerError=e,this.domain="Core"}static isError(r){return null!=r&&"object"==typeof r&&"message"in r&&"additional"in r}format(){let r="";o.StringHelper.isEmpty(this.domain)||(r+=`${this.domain}: `),o.StringHelper.isEmpty(this.message)||(r+=`${this.message}`);const t=Object.keys(this.additional);return t.length>0&&(r.length>0&&(r+="\n"),t.forEach(t=>{r+=`\t${t}: ${n.JsonHelper.stringify(this.additional[t])}\n`})),r}}},function(r,t){Object.defineProperty(t,"__esModule",{value:!0});t.FactoryBase=class{constructor(){this._types={}}register(r,t){this.getInstance()._types[r]=t}unregister(r){delete this.getInstance()._types[r]}exists(r){return void 0!==this.getInstance()._types[r]}types(){return Object.keys(this.getInstance()._types)}create(r,...t){const e=this.getInstance();return e._types[r]?e._types[r](...t):void 0}}},function(r,t){Object.defineProperty(t,"__esModule",{value:!0});t.JsonHelper=class{static stringify(r,t,e){const n=[];return JSON.stringify(r,(e,o)=>{if("object"==typeof o&&null!==r&&void 0!==o){if(-1!==n.indexOf(o))return;n.push(o)}return t?t(e,o):o},e)}}},function(r,t,e){"use strict";e.r(t),e.d(t,"__extends",function(){return o}),e.d(t,"__assign",function(){return c}),e.d(t,"__rest",function(){return s}),e.d(t,"__decorate",function(){return i}),e.d(t,"__param",function(){return a}),e.d(t,"__metadata",function(){return l}),e.d(t,"__awaiter",function(){return u}),e.d(t,"__generator",function(){return f}),e.d(t,"__exportStar",function(){return p}),e.d(t,"__values",function(){return _}),e.d(t,"__read",function(){return h}),e.d(t,"__spread",function(){return g}),e.d(t,"__await",function(){return b}),e.d(t,"__asyncGenerator",function(){return y}),e.d(t,"__asyncDelegator",function(){return v}),e.d(t,"__asyncValues",function(){return O}),e.d(t,"__makeTemplateObject",function(){return d}),e.d(t,"__importStar",function(){return j}),e.d(t,"__importDefault",function(){return S});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(r,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(r,t)};function o(r,t){function e(){this.constructor=r}n(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var c=function(){return(c=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o]);return r}).apply(this,arguments)};function s(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&(e[n[o]]=r[n[o]])}return e}function i(r,t,e,n){var o,c=arguments.length,s=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,n);else for(var i=r.length-1;i>=0;i--)(o=r[i])&&(s=(c<3?o(s):c>3?o(t,e,s):o(t,e))||s);return c>3&&s&&Object.defineProperty(t,e,s),s}function a(r,t){return function(e,n){t(e,n,r)}}function l(r,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,t)}function u(r,t,e,n){return new(e||(e=Promise))(function(o,c){function s(r){try{a(n.next(r))}catch(r){c(r)}}function i(r){try{a(n.throw(r))}catch(r){c(r)}}function a(r){r.done?o(r.value):new e(function(t){t(r.value)}).then(s,i)}a((n=n.apply(r,t||[])).next())})}function f(r,t){var e,n,o,c,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(r,s)}catch(r){c=[6,r],n=0}finally{e=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}function p(r,t){for(var e in r)t.hasOwnProperty(e)||(t[e]=r[e])}function _(r){var t="function"==typeof Symbol&&r[Symbol.iterator],e=0;return t?t.call(r):{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}}}function h(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,o,c=e.call(r),s=[];try{for(;(void 0===t||t-- >0)&&!(n=c.next()).done;)s.push(n.value)}catch(r){o={error:r}}finally{try{n&&!n.done&&(e=c.return)&&e.call(c)}finally{if(o)throw o.error}}return s}function g(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(h(arguments[t]));return r}function b(r){return this instanceof b?(this.v=r,this):new b(r)}function y(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=e.apply(r,t||[]),c=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(r){o[r]&&(n[r]=function(t){return new Promise(function(e,n){c.push([r,t,e,n])>1||i(r,t)})})}function i(r,t){try{(e=o[r](t)).value instanceof b?Promise.resolve(e.value.v).then(a,l):u(c[0][2],e)}catch(r){u(c[0][3],r)}var e}function a(r){i("next",r)}function l(r){i("throw",r)}function u(r,t){r(t),c.shift(),c.length&&i(c[0][0],c[0][1])}}function v(r){var t,e;return t={},n("next"),n("throw",function(r){throw r}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=r[n]?function(t){return(e=!e)?{value:b(r[n](t)),done:"return"===n}:o?o(t):t}:o}}function O(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=r[Symbol.asyncIterator];return e?e.call(r):(r=_(r),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(e){t[e]=r[e]&&function(t){return new Promise(function(n,o){(function(r,t,e,n){Promise.resolve(n).then(function(t){r({value:t,done:e})},t)})(n,o,(t=r[e](t)).done,t.value)})}}}function d(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}function j(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)Object.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function S(r){return r&&r.__esModule?r:{default:r}}},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(2);t.NetworkError=class extends n.CoreError{constructor(r,t,e){super(r,t,e),this.domain="Network"}}},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(1);class o{static isArray(r){return null!=r&&Array.isArray(r)}static isEmpty(r){return!o.isArray(r)||0===r.length}static isTyped(r,t){return!o.isEmpty(r)&&!r.includes(void 0)&&!r.includes(null)&&r.every(r=>n.ObjectHelper.isType(r,t))}}t.ArrayHelper=o},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(2),o=e(4),c=e(1),s=e(0);t.ErrorHelper=class{static format(r,t){if(null==r)return"unknown error";if(n.CoreError.isError(r)){let e=r.format();if(t&&r.stack){e+="\nStack Trace";const t=r.stack.split("\n");t.shift(),e+=`\n${t.join("\n")}`}return c.ObjectHelper.isEmpty(r.innerError)||(t&&!c.ObjectHelper.isEmpty(r.innerError.stack)?(e+="\n\n-----------------------------------------------",e+="\nInner Stack Trace\n",e+=r.innerError.stack):e+=`\nInner Error: ${r.innerError.message}\n`),e}if(r instanceof Error){let e="";return t&&!c.ObjectHelper.isEmpty(r.stack)?e+=r.stack:e+=r.message,e}return s.StringHelper.isString(r)?r:o.JsonHelper.stringify(r,void 0,"\t")}}},function(r,t){Object.defineProperty(t,"__esModule",{value:!0});t.NumberHelper=class{static isInteger(r){return Number.isInteger(r)&&!Number.isNaN(r)&&Number.isFinite(r)}static isNumber(r){return null!=r&&"number"==typeof r&&!Number.isNaN(r)&&Number.isFinite(r)}static isFloatString(r){return/^-?\d*\.?\d+$/.test(r)}static isIntegerString(r){return/^-?\d+$/.test(r)}}},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(5);n.__exportStar(e(2),t),n.__exportStar(e(6),t),n.__exportStar(e(11),t),n.__exportStar(e(3),t),n.__exportStar(e(12),t),n.__exportStar(e(13),t),n.__exportStar(e(14),t),n.__exportStar(e(7),t),n.__exportStar(e(8),t),n.__exportStar(e(4),t),n.__exportStar(e(9),t),n.__exportStar(e(0),t),n.__exportStar(e(1),t),n.__exportStar(e(15),t),n.__exportStar(e(16),t),n.__exportStar(e(17),t),n.__exportStar(e(18),t),n.__exportStar(e(19),t)},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(2);t.PlatformError=class extends n.CoreError{constructor(r,t,e){super(r,t,e),this.domain="Platform"}}},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(3);class o extends n.FactoryBase{constructor(){super()}static instance(){return o._instance||(o._instance=new o),o._instance}getInstance(){return o.instance()}}t.NetworkClientFactory=o},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(3);class o extends n.FactoryBase{constructor(){super()}static instance(){return o._instance||(o._instance=new o),o._instance}getInstance(){return o.instance()}}t.PlatformCryptoFactory=o},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(3);class o extends n.FactoryBase{constructor(){super()}static instance(){return o._instance||(o._instance=new o),o._instance}getInstance(){return o.instance()}}t.RngServiceFactory=o},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(7),o=e(8),c=e(1),s=e(0);t.ConsoleLogger=class{constructor(r){this._loggingObject=r||console}banner(r,...t){this._loggingObject.log("=".repeat(80)),this._loggingObject.log(r),this.logArgs(this._loggingObject.log,t),this._loggingObject.log("=".repeat(80))}log(r,...t){this._loggingObject.log(r),this.logArgs(this._loggingObject.log,t)}info(r,...t){this._loggingObject.info(r),this.logArgs(this._loggingObject.info,t)}warning(r,...t){this._loggingObject.warn(r),this.logArgs(this._loggingObject.warn,t)}error(r,t,...e){this._loggingObject.error(r),c.ObjectHelper.isEmpty(t)||o.ErrorHelper.format(t,!0).split("\n").forEach(r=>{this._loggingObject.error(`\t${r}`)}),this.logArgs(this._loggingObject.error,e)}logArgs(r,t){if(!n.ArrayHelper.isEmpty(t)){const e="\t";let n="";t.forEach((r,o)=>{n+=this.createItem(e,"",r),o<t.length-1&&(n+=`${e}${"-".repeat(70)}\n`)}),r(n)}}createItem(r,t,e,o="\n"){let i="";if(n.ArrayHelper.isArray(e)){const n=`${r}\t`;s.StringHelper.isEmpty(t)?i+=`${r}[\n`:i+=`${r}${t}: [\n`,e.forEach((r,t)=>{i+=this.createItem(n,"",r,`${t<e.length-1?",":""}\n`)}),i+=`${r}]\n`}else if(c.ObjectHelper.isObject(e)){const n=e.toString();if("[object Object]"===n){const n=`${r}\t`;s.StringHelper.isEmpty(t)?i+=`${r}{\n`:i+=`${r}${t}: {\n`;const o=Object.keys(e);o.forEach((r,t)=>{i+=this.createItem(n,r,e[r],`${t<o.length-1?",":""}\n`)}),i+=`${r}}\n`}else i+=this.createItem(r,t,n.replace(/\n/g,`\n${r}`),o)}else s.StringHelper.isEmpty(t)?i+=`${r}${c.ObjectHelper.isEmpty(e)?e:e.toString()}${o}`:i+=`${r}${t}: ${c.ObjectHelper.isEmpty(e)?e:e.toString()}${o}`;return i}}},function(r,t){Object.defineProperty(t,"__esModule",{value:!0});t.NullLogger=class{banner(r,...t){}log(r,...t){}info(r,...t){}warning(r,...t){}error(r,t,...e){}}},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(6),o=e(9),c=e(1),s=e(0);class i{constructor(r,t,e,i){if(!s.StringHelper.isString(r)||!/http|https/.test(r))throw new n.NetworkError("The protocol must be defined as http or https");if(!s.StringHelper.isString(t))throw new n.NetworkError("The host must be defined");if(!o.NumberHelper.isInteger(e)||e<=0)throw new n.NetworkError("The port must be a number greater than zero");if(!c.ObjectHelper.isEmpty(i)&&!s.StringHelper.isString(i))throw new n.NetworkError("The rootPath must be a valid string");this._protocol=r,this._host=t.replace(/^\/*/,"").replace(/\/*$/,""),this._port=e,this._rootPath=(i||"").replace(/^\/*/,"").replace(/\/*$/,"")}static fromUri(r){if(s.StringHelper.isEmpty(r))throw new n.NetworkError("The uri can not be empty");const t=/^(https?):\/\/(.*?)(:\d+)?(\/.*)?$/.exec(r);if(c.ObjectHelper.isEmpty(t)||5!==t.length)throw new n.NetworkError(`The uri is not in the correct format '${r}'`);return new i(t[1],t[2],t[3]?parseInt(t[3].substr(1),10):80,t[4])}getProtocol(){return this._protocol}getHost(){return this._host}getRootPath(){return this._rootPath}getPort(){return this._port}getUri(){let r=`${this._protocol}://${this._host}:${this._port}`;return this._rootPath.length>0&&(r+=`/${this._rootPath}`),r}}t.NetworkEndPoint=i},function(r,t,e){Object.defineProperty(t,"__esModule",{value:!0});const n=e(5);t.BackgroundTaskService=class{create(r,t){return n.__awaiter(this,void 0,void 0,function*(){return new Promise((e,n)=>{setTimeout(()=>{try{e(r())}catch(r){n(r)}},t)})})}}},function(r,t){Object.defineProperty(t,"__esModule",{value:!0});t.TimeService=class{msSinceEpoch(){return Date.now()}}}])});